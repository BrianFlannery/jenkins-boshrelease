<OBXml>
check process jenkins_master
<branches field="use_monit_debugger" >
<branch value="false" >
  with pidfile /var/vcap/sys/run/jenkins_master/pid
  start program "/var/vcap/jobs/jenkins_master/bin/ctl start"
  stop program "/var/vcap/jobs/jenkins_master/bin/ctl stop"
  group vcap
</branch>
<branch value="true" >
  with pidfile /var/vcap/sys/run/jenkins_master/jenkins_master.pid
  start program "/var/vcap/jobs/jenkins_master/bin/monit_debugger jenkins_master_ctl '/var/vcap/jobs/jenkins_master/bin/jenkins_master_ctl start'"<branches field="jenkins_master_monit_timeout" ><branch value="120_seconds" 
> with timeout 120 seconds</branch></branches>
  stop program "/var/vcap/jobs/jenkins_master/bin/monit_debugger jenkins_master_ctl '/var/vcap/jobs/jenkins_master/bin/jenkins_master_ctl stop'"
  group vcap
</branch>
</branches>
<branches field="jenkins_master_use_proxy" >
<branch value="true" 
>check process jenkins_master_monit_proxy_process
  with pidfile /var/vcap/sys/run/jenkins_master/nginx.pid
  start program "/var/vcap/jobs/jenkins_master/bin/monit_debugger jenkins_master_monit_proxy_ctl '/var/vcap/jobs/jenkins_master/bin/nginx_ctl start'"
  stop program "/var/vcap/jobs/jenkins_master/bin/monit_debugger jenkins_master_monit_proxy_ctl '/var/vcap/jobs/jenkins_master/bin/nginx_ctl stop'"
  group vcap
</branch>
</branches>
<branches field="jenkins_master_use_route_registrar" >
<branch value="true" 
>&lt;% if p("route_registrar.enabled") %>
check process route_registrar
 with pidfile /var/vcap/sys/run/jenkins_master/route_registrar.pid
 start program "/var/vcap/jobs/jenkins_master/bin/monit_debugger route_registrar_ctl '/var/vcap/jobs/jenkins_master/bin/route_registrar_ctl start'" with timeout 10 seconds
 stop program "/var/vcap/jobs/jenkins_master/bin/monit_debugger route_registrar_ctl '/var/vcap/jobs/jenkins_master/bin/route_registrar_ctl stop'" with timeout 10 seconds
 group vcap
&lt;% end %>
</branch>
</branches>
</OBXml>
